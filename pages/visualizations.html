<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Christopher King - [Page Title]</title>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
  :root {
      --bg-light: #0059b3;
      --text-dark: #333;
      --accent: #003366;
    }

    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-light);
      color: var(--text-dark);
    }

    h1, h2, h3 { font-family: 'Poppins', sans-serif; }
    p { font-size: 16px; font-family: 'Poppins', sans-serif; }

    /* Header */
    .new-header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: var(--accent);
      padding: 0.75rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      box-sizing: border-box;
      z-index: 999;
    }
    .header-left, .header-right {
      display: flex;
      align-items: center;
    }
    .header-left { gap: 1rem; }
    .header-right {
      gap: 0.5rem;
      margin-left: auto;
      flex-wrap: wrap;
    }
    .site-name a {
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      font-weight: 600;
    }
    .dark-toggle-switch {
      width: 40px;
      height: 20px;
      background: #ccc;
      border-radius: 50px;
      position: relative;
      cursor: pointer;
      transition: background 0.3s;
    }
    .dark-toggle-switch .circle {
      width: 16px;
      height: 16px;
      background: white;
      border-radius: 50%;
      position: absolute;
      top: 2px;
      left: 3px;
      transition: left 0.3s;
    }
    .dark-toggle-switch.active { background: #444; }
    .dark-toggle-switch.active .circle { left: 22px; }

    .survey-link-box {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      text-decoration: none;
      font-size: 1rem;
      font-weight: 600;
      color: white;
      padding: 0.4rem 0.8rem;
      border-radius: 6px;
      transition: background-color 0.3s ease;
    }

    .color-rect {
      width: 6px;
      height: 30px;
      border-radius: 3px;
    }

    /* Hover colors */
    .survey-link-surveys:hover { background-color: #7F30C4; }
    .survey-link-memos:hover { background-color: #FFA02F; }
    .survey-link-dashboards:hover { background-color: #00C7B2; }
    .survey-link-visualizations:hover { background-color: #00549F; }
    .survey-link-gallery:hover { background-color: #D7A8FF; }

    /* Hero */
    .hero {
      height: 70vh;
      display: flex;
      justify-content: flex-start;
      align-items: center;
      padding: 8rem 2rem 4rem;
      background-image: url('../images/banner1.png');
      background-size: cover;
      background-position: center;
      transition: opacity 1s ease 0.4s;
      opacity: 0;
    }
    .hero.animate-in { opacity: 1; }

    .hero-box {
      background: rgba(255, 255, 255, 0.95);
      padding: 2rem;
      border-radius: 16px;
      margin-left: 10%;
      max-width: 700px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      color: var(--accent);
      opacity: 0;
      transform: translateY(30px);
      transition: all 0.6s ease 1s;
    }
    .hero-box.animate-in {
      opacity: 1;
      transform: translateY(0);
    }
    .hero-box h1 {
      font-size: 36px;
      margin-bottom: 0.5rem;
    }
    
     .hero-box p {
      font-size: 1.2rem;
    }

    /* Footer */
    footer {
      background: var(--accent);
      padding: 1.5rem;
      text-align: center;
      color: white;
      margin-top: 4rem;
    }
    .social-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-top: 1rem;
    }
    .social-links a {
      color: white;
      font-size: 0.9rem;
      text-decoration: none;
    }
    .social-links a:hover { text-decoration: underline; }

    /* Dark Mode */
    body.dark-mode {
      background-color: var(--accent);
      color: white;
    }
    body.dark-mode .new-header,
    body.dark-mode footer {
      background: var(--accent);
    }
    body.dark-mode .hero {
      background-image: url('images/nightbanner1.png');
    }
    body.dark-mode .hero-box {
      background: #1f1f1f;
      color: white;
    }

    /* === Data Insights Carousel === */
.data-insights-carousel {
  position: relative;
  background: #f4f9ff;
  padding: 2rem;
  border-radius: 12px;
  margin: 3rem auto;
  max-width: 1000px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.carousel-image {
  width: 300px;
  height: auto;
  border-radius: 8px;
  object-fit: contain;
  flex-shrink: 0;
}

.carousel-text {
  flex: 1;
}

.carousel-track {
  display: flex;
  transition: transform 0.5s ease-in-out;
}

.carousel-card {
  min-width: 100%;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  gap: 2rem;
  background: white;
  padding: 1.5rem;
  border-radius: 8px;
  box-sizing: border-box;
  align-items: flex-start;
}


.tabbed-data-section {
  background: #f4f4f4;
  padding: 2rem 1rem;
  max-width: 1100px;
  margin: 3rem auto;
  border-radius: 12px;
}

.tab-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.tab-button {
  background: none;
  border: 2px solid #003366;
  color: #003366;
  padding: 0.5rem 1.2rem;
  border-radius: 8px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
}

.tab-button.active,
.tab-button:hover {
  background: #003366;
  color: white;
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}

.tab-layout {
  display: flex;
  flex-wrap: nowrap;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  max-width: 1200px; /* ‚Üê increase this from 1000px */
  margin: 0 auto;
}



.tab-image {
  flex: 1 1 75%;
  max-width: 700px;
  aspect-ratio: 4 / 3;
  background-size: contain;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #fff;
}



.tab-description {
  flex: 1 1 35%;
  padding: 2rem;
  color: #003366;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.tab-description h2 {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
}

.tab-description span {
  color: #00C7B2;
}

.tab-description p {
  font-size: 1rem;
  line-height: 1.6;
}

/* New content layout classes */
.content-section {
    max-width: 1200px;
    margin: 4rem auto; /* Adjust margin as needed */
    padding: 0 2rem; /* Add horizontal padding for smaller screens */
}

.section-header {
    text-align: center;
    margin-bottom: 2rem;
    color: var(--accent); /* Matches existing accent color */
}
body.dark-mode .section-header {
    color: white;
}


.grid-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); /* 3 columns on large screens, adjusts for smaller */
    gap: 2rem; /* Spacing between grid items */
}

.grid-item {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    text-decoration: none; /* Remove underline from links */
    color: var(--text-dark); /* Inherit text color */
    display: flex;
    flex-direction: column;
    transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}
.grid-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
}
body.dark-mode .grid-item {
    background: #1f1f1f;
    color: white;
}


.grid-item-image {
    width: 100%;
    height: 200px; /* Fixed height for consistency */
    object-fit: cover; /* Cover the area, cropping if necessary */
    border-bottom: 1px solid #eee; /* Separator for image and text */
}

body.dark-mode .grid-item-image {
    border-color: #333;
}

.grid-item-content {
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    flex-grow: 1; /* Allows content to push footer to bottom if items have varying heights */
}

.grid-item-content h3 {
    font-size: 1.25rem;
    margin-top: 0;
    margin-bottom: 0.5rem;
    color: var(--accent); /* Title color */
}
body.dark-mode .grid-item-content h3 {
    color: white;
}

.grid-item-content p {
    font-size: 0.95rem;
    line-height: 1.5;
    margin-bottom: 1rem;
    flex-grow: 1; /* Allow paragraph to take available space */
}

.grid-item-meta {
    font-size: 0.85rem;
    color: #777;
    margin-top: auto; /* Pushes meta to the bottom */
}
body.dark-mode .grid-item-meta {
    color: #bbb;
}

.button-container {
    text-align: center;
    margin-top: 3rem;
}

.button-container a {
    display: inline-block;
    background: var(--accent);
    color: white;
    padding: 0.8rem 1.8rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: background-color 0.3s ease;
}

.button-container a:hover {
    background-color: #002244; /* Darker shade on hover */
}
body.dark-mode .button-container a {
    background: #D7A8FF; /* Lighter color for dark mode button */
    color: var(--accent);
}
body.dark-mode .button-container a:hover {
    background-color: #C08FFF;
}

/* Lightbox Styles */
.lightbox-overlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9); /* Dark semi-transparent background */
    z-index: 1000; /* Ensure it's on top of everything */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    opacity: 0; /* Start with 0 opacity for fade-in effect */
    transition: opacity 0.3s ease-in-out;
}

.lightbox-overlay.active {
    display: flex; /* Show when active */
    opacity: 1; /* Fade in */
}

.lightbox-content {
    position: relative;
    max-width: 90%; /* Max width of the content container */
    max-height: 90%; /* Max height of the content container */
    background: #fff; /* White background for the content box */
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    display: flex; /* Use flexbox for image/iframe centering */
    flex-direction: column; /* Stack image, then caption */
    align-items: center; /* Center image/iframe */
}

/* Dark Mode for Lightbox content */
body.dark-mode .lightbox-content {
    background: #1f1f1f;
}
body.dark-mode .lightbox-caption {
    color: white;
}
body.dark-mode .lightbox-close,
body.dark-mode .lightbox-nav {
    color: white;
    background: rgba(255, 255, 255, 0.1);
}
body.dark-mode .lightbox-close:hover,
body.dark-mode .lightbox-nav:hover {
    background: rgba(255, 255, 255, 0.2);
}


.lightbox-image,
.lightbox-iframe {
    max-width: 100%;
    max-height: 75vh; /* Max height relative to viewport height */
    display: block; /* Remove extra space below images */
    object-fit: contain; /* Ensure entire image is visible, scale down if needed */
    margin-bottom: 15px;
}
.lightbox-iframe {
    width: 80vw; /* Adjust as needed */
    height: 75vh; /* Adjust as needed */
}

/* Hide iframe and image by default, show based on content type */
.lightbox-image, .lightbox-iframe {
    display: none;
}
.lightbox-image.active, .lightbox-iframe.active {
    display: block;
}

.lightbox-close {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 30px;
    color: #333;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0 10px;
    border-radius: 5px;
    transition: background-color 0.2s ease;
}
.lightbox-close:hover {
    background-color: rgba(0, 0, 0, 0.1);
}

.lightbox-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    font-size: 50px;
    color: white;
    background: rgba(0, 0, 0, 0.5); /* Semi-transparent background for buttons */
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 5px;
    transition: background-color 0.2s ease;
}
.lightbox-nav:hover {
    background-color: rgba(0, 0, 0, 0.7);
}
.lightbox-prev {
    left: 20px;
}
.lightbox-next {
    right: 20px;
}

.lightbox-caption {
    font-size: 1.1rem;
    color: #333;
    text-align: left;
    margin-top: 10px;
    padding-left: 80px; 
    padding-right: 80px;
    max-height: 100px; /* Adjust this value as needed. This sets the maximum height before scrolling. */
    overflow-y: auto; /* Adds a vertical scrollbar if content overflows */
    word-wrap: break-word; /* Ensures long words don't overflow */
    box-sizing: border-box; /* Ensures padding doesn't add to the total width/height */
}

/* Dark Mode adjustment for scrollbar if you want it to be more visible */
body.dark-mode .lightbox-caption {
    color: white;
    /* Optional: Style scrollbar for dark mode, though browser default is often fine */
    /* scrollbar-color: #555 #333; */ /* thumb and track */
}
}

/* Hide nav buttons if only one item */
.lightbox-overlay:not(.has-multiple-items) .lightbox-nav {
    display: none;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .lightbox-nav {
        font-size: 40px;
        padding: 5px 10px;
    }
    .lightbox-prev { left: 5px; }
    .lightbox-next { right: 5px; }
    .lightbox-iframe {
        width: 90vw;
        height: 60vh;
    }
}
    
  </style>
</head>

<body onload="animateOnLoad()">

<!-- Header -->
<header class="new-header">
  <div class="header-left">
    <div class="dark-toggle-switch" onclick="toggleSwitch(this)">
      <div class="circle"></div>
    </div>
    <div class="site-name">
      <a href="/index.html">Christopher King</a>
    </div>
  </div>
  <div class="header-right">
    <a href="survey.html" class="survey-link-box survey-link-surveys">
      <div class="color-rect" style="background-color: #7F30C4;"></div><span>Survey Designs</span>
    </a>
    <a href="memos.html" class="survey-link-box survey-link-memos">
      <div class="color-rect" style="background-color: #FFA02F;"></div><span>Memos & Budgets</span>
    </a>
    <a href="dashboards.html" class="survey-link-box survey-link-dashboards">
      <div class="color-rect" style="background-color: #00C7B2;"></div><span>Dashboards</span>
    </a>
    <a href="visualizations.html" class="survey-link-box survey-link-visualizations">
      <div class="color-rect" style="background-color: #00549F;"></div><span>Data Visualizations</span>
    </a>
    <a href="gallery.html" class="survey-link-box survey-link-gallery">
      <div class="color-rect" style="background-color: #D7A8FF;"></div><span>Gallery</span>
    </a>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="hero-box">
    <h1>Visual Insights</h1>
    <p>Data interpretation is easier with graphics, and there are many types of visualization to choose from. Browse the visualizations I've employed to make meaningful information easier to understand</p>
  </div>
</section>


<section class="content-section">
    <div class="grid-container">

        <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src=../images/semitab1.png
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="This visualization presents a breakdown of the three components  in the semiconductor supply chain: the  design of chips, which encompasses the conceptualization and architectural planning; the  fabrication of chips, referring to the manufacturing process where integrated circuits are physically created on semiconductor wafers; and finally, the assembly and testing phase, which involves packaging the fabricated chips and performing quality assurance checks">
                <img src="../images/semitab1.png" alt="Data Visualization 1 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Semiconductor Supply Chain</h3>
                    <p>A visualization of the three main components in the semiconductor supply chain within California.</p>
                    <p class="grid-item-meta">Tools: Tableau | Date: February 2025</p>
                </div>
            </a>

               <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src=../images/semitab2.png
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="Awarding engineering degrees is the first step to building a semiconductor workforce. UC San Diego produces the 2nd most undergraduates engineers in California and 16th most in the U.S.">
                <img src="../images/semitab2.png" alt="Data Visualization 2 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Building the Semiconductor Workforce</h3>
                    <p>U.S. universities who awarded the most engineering degrees in 2023.</p>
                    <p class="grid-item-meta">Tools: Tableau | Date: March 2025</p>
                </div>
            </a>

                <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src=../images/semitab3.png
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="The second step to building a California semiconductor workforce is employing engineering graduates within the state. UCSD engineering students who finish a postdoctoral degree primarily work in California.">
                <img src="../images/semitab3.png" alt="Data Visualization 3 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Retaining California's Top Talent</h3>
                    <p>Geographic placement of UCSD engineering students who are awarded a postdoctoral degree.</p>
                    <p class="grid-item-meta">Tools: Tableau | Date: March 2025</p>
                </div>
            </a>


                <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src="https://via.placeholder.com/1200x800?text=Visualization+1"
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="Interactive Dashboard Insights - Details coming soon!">
                <img src="../images/viz-placeholder1.png" alt="Data Visualization 1 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Interactive Dashboard Insights</h3>
                    <p>A dynamic dashboard illustrating key trends in [topic]. Built with [tool, e.g., Tableau, Power BI].</p>
                    <p class="grid-item-meta">Category: Dashboards | Tools: Tableau, SQL | Date: June 2025</p>
                </div>
            </a>


                <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src="https://via.placeholder.com/1200x800?text=Visualization+1"
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="Interactive Dashboard Insights - Details coming soon!">
                <img src="../images/viz-placeholder1.png" alt="Data Visualization 1 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Interactive Dashboard Insights</h3>
                    <p>A dynamic dashboard illustrating key trends in [topic]. Built with [tool, e.g., Tableau, Power BI].</p>
                    <p class="grid-item-meta">Category: Dashboards | Tools: Tableau, SQL | Date: June 2025</p>
                </div>
            </a>


                <a href="#" class="grid-item"
               /* This 'data-type' tells the lightbox whether to load an image or an interactive iframe. */
               /* Change 'image' to 'iframe' if your viz is an embed (like Tableau, Power BI). */
               data-type="image"
               /* This 'data-src' is the MOST IMPORTANT. It's the path or URL for the content in the lightbox. */
               /* If data-type is "image", REPLACE with the path to your LARGE IMAGE FILE (e.g., ../images/my-awesome-viz.png). */
               /* If data-type is "iframe", REPLACE with the EMBED URL provided by your viz tool (e.g., Tableau Public share link). */
               data-src="https://via.placeholder.com/1200x800?text=Visualization+1"
               /* This 'data-caption' is the text that appears under the viz in the lightbox. */
               /* REPLACE with a descriptive title/caption for YOUR visualization. */
               data-caption="Interactive Dashboard Insights - Details coming soon!">
                <img src="../images/viz-placeholder1.png" alt="Data Visualization 1 Thumbnail" class="grid-item-image">
                <div class="grid-item-content">
                    <h3>Interactive Dashboard Insights</h3>
                    <p>A dynamic dashboard illustrating key trends in [topic]. Built with [tool, e.g., Tableau, Power BI].</p>
                    <p class="grid-item-meta">Category: Dashboards | Tools: Tableau, SQL | Date: June 2025</p>
                </div>
            </a>


    </div>

</section>

  <div class="lightbox-overlay" id="lightbox">
    <div class="lightbox-content">
        <button class="lightbox-close">&times;</button>
        <button class="lightbox-nav lightbox-prev">&#10094;</button> <img src="" alt="Data Visualization" class="lightbox-image" id="lightboxImage">
        <iframe src="" frameborder="0" class="lightbox-iframe" allowfullscreen></iframe> <button class="lightbox-nav lightbox-next">&#10095;</button> <div class="lightbox-caption"></div>
    </div>
</div>
  
<!-- Footer -->
<footer id="footer">
  <p>Let's Connect!</p>
  <div class="social-links">
    <a href="https://www.linkedin.com/in/christopherd-king" target="_blank">LinkedIn</a>
    <a href="mailto:cdking417@gmail.com">Email</a>
  </div>
</footer>

<!-- Scripts -->
<script>
function toggleSwitch(el) {
  el.classList.toggle('active');
  document.body.classList.toggle('dark-mode');
}

function animateOnLoad() {
  document.querySelector('.new-header').classList.add('animate-in');
  document.querySelector('.hero').classList.add('animate-in');
  document.querySelector('.hero-box').classList.add('animate-in');
}
</script>

  <script>
document.querySelectorAll('.tab-button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));

    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

// --- Lightbox / Carousel Script for Visualizations Page ---

const lightbox = document.getElementById('lightbox');
const lightboxImage = document.getElementById('lightboxImage');
const lightboxIframe = document.querySelector('.lightbox-iframe');
const lightboxCaption = document.querySelector('.lightbox-caption');
const lightboxCloseBtn = document.querySelector('.lightbox-close');
const lightboxPrevBtn = document.querySelector('.lightbox-nav.lightbox-prev');
const lightboxNextBtn = document.querySelector('.lightbox-nav.lightbox-next');
const gridItems = document.querySelectorAll('.grid-item'); // Select all grid items

let currentVizIndex = 0;
let vizData = []; // To store data for all visualizations

// Populate vizData from grid items
gridItems.forEach((item, index) => {
    vizData.push({
        type: item.dataset.type,
        src: item.dataset.src,
        caption: item.dataset.caption
    });

    // Add click listener to each grid item
    item.addEventListener('click', function(e) {
        e.preventDefault(); // Prevent default link behavior (opening new page)
        currentVizIndex = index; // Set the current index
        openLightbox(currentVizIndex);
    });
});

// Function to open the lightbox
function openLightbox(index) {
    const viz = vizData[index];

    // Reset visibility of image/iframe
    lightboxImage.classList.remove('active');
    lightboxIframe.classList.remove('active');
    lightboxImage.src = ''; // Clear previous src
    lightboxIframe.src = ''; // Clear previous src

    if (viz.type === 'image') {
        lightboxImage.src = viz.src;
        lightboxImage.classList.add('active');
    } else if (viz.type === 'iframe') {
        lightboxIframe.src = viz.src;
        lightboxIframe.classList.add('active');
    }

    lightboxCaption.textContent = viz.caption; // Set caption

    // Show/hide nav buttons if there's only one item
    if (vizData.length > 1) {
        lightbox.classList.add('has-multiple-items');
    } else {
        lightbox.classList.remove('has-multiple-items');
    }

    lightbox.classList.add('active'); // Show the lightbox overlay
    document.body.style.overflow = 'hidden'; // Prevent body scrolling
}

// Function to close the lightbox
function closeLightbox() {
    lightbox.classList.remove('active'); // Hide the lightbox overlay
    document.body.style.overflow = ''; // Restore body scrolling
    lightboxImage.src = ''; // Clear image src to stop loading/prevent issues
    lightboxIframe.src = ''; // Clear iframe src
}

// Navigation functions
function showNextViz() {
    currentVizIndex = (currentVizIndex + 1) % vizData.length;
    openLightbox(currentVizIndex);
}

function showPrevViz() {
    currentVizIndex = (currentVizIndex - 1 + vizData.length) % vizData.length;
    openLightbox(currentVizIndex);
}

// Event Listeners for Lightbox Controls
lightboxCloseBtn.addEventListener('click', closeLightbox);
lightboxPrevBtn.addEventListener('click', showPrevViz);
lightboxNextBtn.addEventListener('click', showNextViz);

// Close lightbox when clicking on the overlay itself (but not the content)
lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) { // Check if the click was directly on the overlay
        closeLightbox();
    }
});

// Keyboard navigation (optional but good for UX)
document.addEventListener('keydown', function(e) {
    if (lightbox.classList.contains('active')) { // Only if lightbox is open
        if (e.key === 'Escape') {
            closeLightbox();
        } else if (e.key === 'ArrowRight' && vizData.length > 1) {
            showNextViz();
        } else if (e.key === 'ArrowLeft' && vizData.length > 1) {
            showPrevViz();
        }
    }
});
</script>
  
</body>
</html>
